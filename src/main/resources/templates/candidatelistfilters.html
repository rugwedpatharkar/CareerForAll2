
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">
<style>
	.card-body{
		font-size:14px
	}
  .form-check-label {
    display: inline;
  }
  
  .col-form-label {
    width: 100%;
  }
  
  .single-row{
    width: 100%;
    clear: both;
  }
 
  .single-column{
    width: 50%;
    float:left;
  }

  .single-column input{
    width: 90;
  }

  .single-row {
    margin: 0 0 0 0;
    padding: 6px 0 6px 0;
  }
  
  .label {
    width: 24%;
    display: inline;
  }


  .col-md-8 {
    width: 100%;
  }
  
  select {
    display: inline;
    cursor: pointer;
  }

  
  .col-sm-10 {
    display: inline;
    width: 100%;
   }





/* Add the following CSS styles to your stylesheet */
.pagination {
    display: flex;
    justify-content: center;
}

.page-item {
    display: inline-block;
    margin-right: 5px;
}

.page-item.disabled {
    pointer-events: none;
    opacity: 0.5;
}

.page-item a {
    display: block;
    padding: 8px 12px;
    background-color: #f2f2f2;
    text-decoration: none;
    color: #333;
    border: 1px solid #ccc;
}

.page-item.active a {
    background-color: #007bff;
    color: #fff;
    border: 1px solid #007bff;
}

  </style>
 
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">

<title>Placement Portal</title>
<meta content="" name="description">
<meta content="" name="keywords">

<link th:href="@{/img/favicon.png}" rel="icon">
<link th:href="@{/img/apple-touch-icon.png}" rel="apple-touch-icon">

<!-- Google Fonts -->
<link href="https://fonts.gstatic.com" rel="preconnect">
<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
	rel="stylesheet">

<!-- Vendor CSS Files -->
<link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}"
	rel="stylesheet">
<link th:href="@{/vendor/bootstrap-icons/bootstrap-icons.css}"
	rel="stylesheet">
<link th:href="@{/vendor/boxicons/css/boxicons.min.css}"
	rel="stylesheet">
<link th:href="@{/vendor/quill/quill.snow.css}" rel="stylesheet">
<link th:href="@{/vendor/quill/quill.bubble.css}" rel="stylesheet">
<link th:href="@{/vendor/remixicon/remixicon.css}" rel="stylesheet">
<link th:href="@{/vendor/simple-datatables/style.css}" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Template Main CSS File -->
<link th:href="@{/css/style.css}" rel="stylesheet">

<!-- Fontawesome CDN Link -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

<!-- Iconscout Link For Icons -->
<link rel="stylesheet"
	href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">


</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
     <i class="bi bi-list toggle-sidebar-btn" style="margin-left:-10px;margin-right:10px"></i>
      <a th:href="@{/index}" class="logo d-flex align-items-center">
        <img src="assets/img/logo.png" alt="">
        <span class="d-none d-lg-block">Placement Portal</span>
      </a>
     
    </div><!-- End Logo -->

    <div class="search-bar">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword">
        <button type="submit" title="Search"><i class="bi bi-search"></i></button>
      </form>
    </div><!-- End Search Bar -->

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

        <li class="nav-item d-block d-lg-none">
          <a class="nav-link nav-icon search-bar-toggle " href="#">
            <i class="bi bi-search"></i>
          </a>
        </li><!-- End Search Icon-->

        

          </ul><!-- End Profile Dropdown Items -->
        </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->
 <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

    
    

    
    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#components-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-journal-text"></i><span>Startups</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="components-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
         
         <ul>   
          <li>
            <a th:href="@{/startup_onboarding}">
              <i class="bi bi-circle "></i><span>Onboarding</span>
            </a>
          </li>
       	   <li>
            <a th:href="@{/CompanyList}">
              <i class="bi bi-circle"></i><span>Startup List</span>
            </a>
          </li>
          <li>
            <a th:href="@{/jobopening}">
              <i class="bi bi-circle"></i><span>Job Posting</span>
            </a>
          </li>
          
      <li>
            <a th:href="@{/joblist/{companyid}(companyid=3)}">
              <i class="bi bi-circle"></i><span>Job List</span>
            </a>
          </li>    
          </ul>
        </ul>
        </li>
          
      
    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-journal-text"></i><span>Institute</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="forms-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
         
       <ul>
          <li>
            <a th:href="@{/institute_onboarding}">
              <i class="bi bi-circle"></i><span>Onboarding</span>
            </a>
          </li>

          <li>
            <a th:href="@{/candidate_registration}">
              <i class="bi bi-circle"></i><span>Candidate Form</span>
            </a>
          </li>
            <li>
            <a th:href="@{/CandidateList}">
              <i class="bi bi-circle"></i><span>Candidate List</span>
            </a>
          </li>
        </ul>
        </ul>
      </li>
      

      

 <li class="nav-heading">Pages</li>

     

      <li class="nav-item">
        <a class="nav-link collapsed" th:href="@{/register}">
          <i class="bi bi-card-list"></i>
          <span>Register</span>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link collapsed" th:href="@{/login}">
          <i class="bi bi-box-arrow-in-right"></i>
          <span>Login</span>
        </a>
      </li><!-- End Login Page Nav -->

    </ul>

  </aside>








 
  <main id="main" class="main">

		<div class="pagetitle">
			<h1>Company Name</h1>
			<nav>
				<ol class="breadcrumb">
					<li class="breadcrumb-item">Filter Job List </li>
					<li class="breadcrumb-item active">Filter Candidate List</li>
				    <li class="breadcrumb-item">List of Mapped Candidates to Job</li>
				    <li class="breadcrumb-item">Profile of Shortlisted Candidates</li>
				</ol>
			</nav>
		</div>

		<section class="section dashboard">
			<div class="card info-card customers-card">
				<div class="card-body"style="margin:10px 0 -15px 0">

					<div class="row">
            <div class="tab-pane fade show active profile-overview">
				<h5 class="card-title"th:text="${position.position}"style="padding:0 0 0 0 "></h5>
			   <div class="row">
				    <div class="col-lx-3 col-lg-3 label "style="width:130px;font-weight:600">Description :</div>
                <div class="col-lx-3 col-lg-3" th:text="${position.description}"></div>	
						</div>
            
							<div class="row">
								<div class="col-lx-3 col-lg-3 label "style="width:130px;font-weight:600">Function :</div>
                <div class="col-lx-3 col-lg-3" th:text="${position.functions}"></div>	
                <div class="col-lx-3 col-lg-3 label"style="width:130px;font-weight:600">Department :</div>
								<div class="col-lx-3 col-lg-3" th:text="${position.functions}"></div>				
							</div>
							
							<div class="row">
								<div class="col-lx-3 col-lg-3 label"style="width:130px;font-weight:600">Position Type :</div>
								<div class="col-lx-3 col-lg-3" th:text="${position.designation}"></div>
								<div class="col-lx-3 col-lg-3 label"style="width:130px;font-weight:600">Country :</div>
								<div class="col-lx-3 col-lg-3" th:text="${position.country}"></div>
							</div>
						
							
							<div class="row">
								<div class="col-lx-3 col-lg-3 label"style="width:130px;font-weight:600">Work Mode :</div>
								<div class="col-lx-3 col-lg-3" th:text="${position.workmode}"></div>
								<div class="col-lx-3 col-lg-3 label"style="width:130px;font-weight:600">Position Type :</div>
								<div class="col-lx-3 col-lg-3" th:text="${position.positiontype}"></div>
							</div>
							
							
						</div>
					</div>
				</div>
			</div>

			

	      	<div class="card info-card customers-card">
          		<div class="card-body">
      						<h5 class="card-title">
			          				Matching The Best ! <span>| Search Candidates By Filters</span>
						      </h5>
 
<!--changes to be done-->
	
		<form th:action="@{/candidatelistfilters/{positionid}/{minKeywordLength}(positionid=${position.positionid}, minKeywordLength=3)}" id="candidateFilter" method="get">

  			<div class="single-row">

        <div class="single-column">
					<div class="col-lx-3 col-lg-3 label"style="font-weight:600">Preffered Work Mode :</div>
                  
      &emsp;<input class="form-check-input" type="radio" value="Work From Home" name="workmode"> 
              <label class="form-check-label" >Work From Home</label>
              
      &ensp;<input class="form-check-input" type="radio" value="Work From Office" name="workmode"> 
              <label class="form-check-label" >Work From Office</label>
              
      &ensp;<input class="form-check-input" type="radio" value="Hybrid" name="workmode"> 
              <label class="form-check-label" >Hybrid</label>
              </div>
             
              <div class="single-column">
              <div class="col-lx-3 col-lg-3 label"style="font-weight:600">Preffered Position Type :</div>
            
      &emsp;<input class="form-check-input" type="radio"  value="Job"name="joborinternship"> 
              <label class="form-check-label" for="gridRadios1">Job</label>
								
      &ensp;<input class="form-check-input" type="radio"   value="Internship"name="joborinternship"> 
              <label class="form-check-label" for="gridRadios2">Internship</label>

             
							</div>
					
          </div>




						
          	<div class="single-row">

            

              
          <div class="single-column">
            <div class="col-lx-3 col-lg-3 label "style="font-weight:600">Preffered Work Experience :
              <select class="form-select" name="noofyearsworkex"  aria-label="Default select example"style="width: 170px; height:24px; padding-top: 4px; font-size:10px; display: inline">

                <option disabled selected>Select Work Experience</option>
                <option value="0">0</option>
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="6">6</option>
                <option value="8">8</option>
                </select>

                </div>
							</div>
							     <label class="col-lx-3 col-lg-3 label"style="font-weight:600">Search Candidate (Name/Skill) :</label>
         <div class="select-btn"style="width: 280px; height:30px; padding:4px 0 4px 0; font-size:10px; display: inline">
									<input style="background: transparent; border: none; outline: none;"
										spellcheck="false" type="text" placeholder="Enter Details"name="search" >
										
								
								</div>	
            </div>
						
				
			 	
                
				
     	
							
	 		          <div class="single-row"style="margin-top:20px;">
				           <div class="col-sm-10">
    	                <input type="submit" value="Apply" class="btn btn-success"  form="candidateFilter"id=" formSubmit" style=" font-size: 12px";>
    	                 <a th:href="@{/eligiblecandidates/{positionid}/{minKeywordLength}(positionid=${position.positionid}, minKeywordLength=3)}" class="btn btn-success" style=" font-size: 12px; background-color:#0d6efd">Reset</a>
			          </div>
						</div>
				</form>				
						<hr style="width: 100%; text-align: center; margin-left: 0">

						<h5 class="card-title" style="padding-top: 5px;">Candidate List</span></h5>
<form id="mapcandidateform" th:action="@{/mapcandidatetojob/{positionid}/{companyid}/{minKeywordLength}(minKeywordLength=3)}"
    th:object="${selectedCandidatesForm}" method="post">
						<table class="table datatable">
							<thead>
								<tr>
									<th scope="col"style="margin-left=20px">Select</th>
									<th scope="col">Name</th>
									<th scope="col">Primary Skills</th>
									<th scope="col">Secondary Skills</th>
									<th scope="col">City</th>
									<th scope="col">Experience</th>
									<th scope="col">CV</th>
								</tr>
							</thead>
							<tbody>
        <tr th:each="c, i : ${listcandidate}">
            <td><input class="form-check-input candidate-checkbox" type="checkbox"  
                    name="candidateids" th:value="${c.candidateid}"></td>
            <td th:text="${c.candidatename}"></td>
            <td th:text="${c.primaryskills}"></td>
            <td th:text="${c.secondaryskills}"></td>
            <td th:text="${c.candidatecity}"></td>
            <td th:text="${c.noofyearsworkex}"></td>
            <td><a class="btn btn-primary"
                    th:href="@{/cvdownload/{candidateid}(candidateid=${c.candidateid})}"
                    style="font-size: 12px;">Download</a></td>
            <!-- Add hidden input field for instituteid -->
            <input type="hidden" name="instituteids" th:value="${c.institutename.instituteid}">
        </tr>
    </tbody>
						</table>
						
					 <input type="hidden"name="positionid"  th:value="${position.positionid}">
					 <input type="hidden" name="companyid"  th:value="${position.company.companyid}">
					
						</form>
						<div class="row mb-3">
							<div class="col-sm-10">
								<button type="submit" class="btn btn-success" form="mapcandidateform" style=" font-size: 12px">Shortlist Candidate</button>
			<a th:href="@{/mappedcandidatelist/{companyid}/{positionid}(companyid=3,  positionid=${position.positionid})}" class="btn btn-success" style="   font-size: 12px; background-color:#0d6efd">Shortlisted Candidate List</a>

							</div>
							
						
						</div>
						
						</div>
					</div>
				</div>
			</div>
	

				</div>
			
		</section>

	</main>

	<!-- Vendor JS Files -->
	<script th:src="@{/vendor/apexcharts/apexcharts.min.js}"></script>
	<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/vendor/chart.js/chart.umd.js}"></script>
	<script th:src="@{/vendor/echarts/echarts.min.js}"></script>
	<script th:src="@{/vendor/quill/quill.min.js}"></script>
	<script th:src="@{/vendor/simple-datatables/simple-datatables.js}"></script>
	<script th:src="@{/vendor/tinymce/tinymce.min.js}"></script>
	<script th:src="@{/vendor/php-email-form/validate.js}"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
		integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
		crossorigin="anonymous"></script>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
		integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
		crossorigin="anonymous"></script>
	<script th:src="@{/js/main.js}"></script>

</body>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const candidateCheckboxes = document.querySelectorAll(".candidate-checkbox");
        const mapCandidatesBtn = document.getElementById("mapCandidatesBtn");

        mapCandidatesBtn.addEventListener("click", function () {
            const formData = new FormData();
            const selectedCandidates = [];

            candidateCheckboxes.forEach((checkbox) => {
                if (checkbox.checked) {
                    const candidateId = checkbox.value;
                    const instituteId = checkbox.parentElement.querySelector("input[name='institutes']").value;

                    formData.append("candidateids", candidateId);
                    formData.append("instituteids", instituteId);

                    selectedCandidates.push(candidateId);
                }
            });

            if (selectedCandidates.length === 0) {
                alert("Please select at least one candidate to map.");
                return;
            }

            formData.append("positionid", document.querySelector("input[name='positionid']").value);

            // Make the AJAX call to submit the form data
            fetch("/mapcandidatetojob/" + positionid + "/3", {
                method: "POST",
                body: formData
            }).then((response) => {
                // Handle the response if needed
                if (response.ok) {
                    // Optional: Reload the page or perform other actions
                    location.reload();
                } else {
                    alert("Failed to map candidates.");
                }
            }).catch((error) => {
                alert("An error occurred while mapping candidates.");
            });
        });
    });
</script>

</html>